<!DOCTYPE HTML>
<html lang="zh" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Cairo 中的 Trait - The Cairo Programming Language (Chinese)</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon-de23e50b.svg">
        <link rel="shortcut icon" href="favicon-8114d1fc.png">
        <link rel="stylesheet" href="css/variables-8adf115d.css">
        <link rel="stylesheet" href="css/general-2459343d.css">
        <link rel="stylesheet" href="css/chrome-ae938929.css">
        <link rel="stylesheet" href="css/print-9e4910d8.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="fonts/fonts-9644e21d.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="mdbook-highlight-css" href="highlight-493f70e1.css">
        <link rel="stylesheet" id="mdbook-tomorrow-night-css" href="tomorrow-night-4c0ae647.css">
        <link rel="stylesheet" id="mdbook-ayu-highlight-css" href="ayu-highlight-3fdfc3ac.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex-d54ab8fc.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc-725ed061.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="mdbook-body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="mdbook-sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("mdbook-sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="mdbook-sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="mdbook-sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="mdbook-page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="mdbook-menu-bar-hover-placeholder"></div>
                <div id="mdbook-menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="mdbook-sidebar-toggle" class="icon-button" for="mdbook-sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="mdbook-sidebar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"/></svg></span>
                        </label>
                        <button id="mdbook-theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="mdbook-theme-list">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M371.3 367.1c27.3-3.9 51.9-19.4 67.2-42.9L600.2 74.1c12.6-19.5 9.4-45.3-7.6-61.2S549.7-4.4 531.1 9.6L294.4 187.2c-24 18-38.2 46.1-38.4 76.1L371.3 367.1zm-19.6 25.4l-116-104.4C175.9 290.3 128 339.6 128 400c0 3.9 .2 7.8 .6 11.6c1.8 17.5-10.2 36.4-27.8 36.4H96c-17.7 0-32 14.3-32 32s14.3 32 32 32H240c61.9 0 112-50.1 112-112c0-2.5-.1-5-.2-7.5z"/></svg></span>
                        </button>
                        <ul id="mdbook-theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mdbook-theme-ayu">Ayu</button></li>
                        </ul>
                        <button id="mdbook-search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="mdbook-searchbar">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352c79.5 0 144-64.5 144-144s-64.5-144-144-144S64 128.5 64 208s64.5 144 144 144z"/></svg></span>
                        </button>
                    </div>

                    <h1 class="menu-title">The Cairo Programming Language (Chinese)</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <span class=fa-svg id="print-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M128 0C92.7 0 64 28.7 64 64v96h64V64H354.7L384 93.3V160h64V93.3c0-17-6.7-33.3-18.7-45.3L400 18.7C388 6.7 371.7 0 354.7 0H128zM384 352v32 64H128V384 368 352H384zm64 32h32c17.7 0 32-14.3 32-32V256c0-35.3-28.7-64-64-64H64c-35.3 0-64 28.7-64 64v96c0 17.7 14.3 32 32 32H64v64c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V384zm-16-88c-13.3 0-24-10.7-24-24s10.7-24 24-24s24 10.7 24 24s-10.7 24-24 24z"/></svg></span>
                        </a>
                        <a href="https://github.com/starkware-libs/cairo-book" title="Git repository" aria-label="Git repository">
                            <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span>
                        </a>
                        <a href="https://github.com/starkware-libs/cairo-book/edit/main/src/src/ch08-02-traits-in-cairo.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <span class=fa-svg id="git-edit-button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M421.7 220.3l-11.3 11.3-22.6 22.6-205 205c-6.6 6.6-14.8 11.5-23.8 14.1L30.8 511c-8.4 2.5-17.5 .2-23.7-6.1S-1.5 489.7 1 481.2L38.7 353.1c2.6-9 7.5-17.2 14.1-23.8l205-205 22.6-22.6 11.3-11.3 33.9 33.9 62.1 62.1 33.9 33.9zM96 353.9l-9.3 9.3c-.9 .9-1.6 2.1-2 3.4l-25.3 86 86-25.3c1.3-.4 2.5-1.1 3.4-2l9.3-9.3H112c-8.8 0-16-7.2-16-16V353.9zM453.3 19.3l39.4 39.4c25 25 25 65.5 0 90.5l-14.5 14.5-22.6 22.6-11.3 11.3-33.9-33.9-62.1-62.1L314.3 67.7l11.3-11.3 22.6-22.6 14.5-14.5c25-25 65.5-25 90.5 0z"/></svg></span>
                        </a>

                    </div>
                </div>

                <div id="mdbook-search-wrapper" class="hidden">
                    <form id="mdbook-searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="mdbook-searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="mdbook-searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <span class=fa-svg id="fa-spin"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M304 48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zm0 416c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM48 304c26.5 0 48-21.5 48-48s-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48zm464-48c0-26.5-21.5-48-48-48s-48 21.5-48 48s21.5 48 48 48s48-21.5 48-48zM142.9 437c18.7-18.7 18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zm0-294.2c18.7-18.7 18.7-49.1 0-67.9S93.7 56.2 75 75s-18.7 49.1 0 67.9s49.1 18.7 67.9 0zM369.1 437c18.7 18.7 49.1 18.7 67.9 0s18.7-49.1 0-67.9s-49.1-18.7-67.9 0s-18.7 49.1 0 67.9z"/></svg></span>
                            </div>
                        </div>
                    </form>
                    <div id="mdbook-searchresults-outer" class="searchresults-outer hidden">
                        <div id="mdbook-searchresults-header" class="searchresults-header"></div>
                        <ul id="mdbook-searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('mdbook-sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('mdbook-sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#mdbook-sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="mdbook-content" class="content">
                    <main>
                        <h1 id="cairo-中的-traits"><a class="header" href="#cairo-中的-traits">Cairo 中的 Traits</a></h1>
<p>Trait 定义了某种类型可以实现的一组方法。当此 trait 被实现时，可以在该类型的实例上调用这些方法。Trait 与泛型类型结合，定义了某种特定类型具有并可以与其他类型共享的功能。我们可以使用 traits 以抽象的方式定义共享行为。我们可以使用 <em>trait 约束 (trait bounds)</em> 来指定泛型类型可以是任何具有特定行为的类型。</p>
<blockquote>
<p>注意：Traits 类似于其他语言中常称为接口 (interfaces) 的功能，尽管有一些差异。</p>
</blockquote>
<p>虽然编写 traits 可以不接受泛型类型，但当与泛型类型一起使用时，它们最有用。我们在 <a href="./ch08-01-generic-data-types.html">上一章</a> 已经涵盖了泛型，我们将在本章中使用它们来演示如何使用 traits 来定义泛型类型的共享行为。</p>
<h2 id="定义-trait"><a class="header" href="#定义-trait">定义 Trait</a></h2>
<p>一个类型的行为由我们可以对该类型调用的方法组成。如果我们可以在所有那些类型上调用相同的方法，则不同的类型共享相同的行为。Trait 定义是一种将方法签名组合在一起的方法，以定义实现某些目的所需的一组行为。</p>
<p>例如，通过在特定位置持有新闻故事，比方说我们有一个结构体 <code>NewsArticle</code>。我们可以定义一个 trait <code>Summary</code>，它描述了可以总结 <code>NewsArticle</code> 类型的东西的行为。</p>
<pre><code class="language-cairo noplayground">pub trait Summary {
    fn summarize(self: @NewsArticle) -&gt; ByteArray;
}
</code></pre>
<p>{{#label first_trait_signature}} <span class="caption"> 清单
{{#ref first_trait_signature}}: 一个 <code>Summary</code> trait，由 <code>summarize</code> 方法提供的行为组成</span></p>
<p>在清单 {{#ref first_trait_signature}} 中，我们使用 <code>trait</code> 关键字声明一个 trait，然后是 trait 的名称，在本例中为 <code>Summary</code>。我们还将 trait 声明为 <code>pub</code>，以便依赖此 crate 的 crate 也可以使用此 trait，我们将在几个示例中看到。</p>
<p>在花括号内，我们声明描述实现此 trait 的类型的行为的方法签名，在这个例子中是 <code>fn summarize(self: @NewsArticle) -&gt; ByteArray;</code>。在方法签名之后，我们不提供花括号内的实现，而是使用分号。</p>
<blockquote>
<p>注意：<code>ByteArray</code> 类型是 Cairo 中用于表示字符串的类型。</p>
</blockquote>
<p>由于 trait 不是泛型的，<code>self</code> 参数也不是泛型的，并且是 <code>@NewsArticle</code> 类型。这意味着 <code>summarize</code> 方法只能在 <code>NewsArticle</code> 的实例上调用。</p>
<p>现在，考虑我们想制作一个名为 <em>aggregator</em> 的媒体聚合器库 crate，它可以显示可能存储在 <code>NewsArticle</code> 或 <code>Tweet</code> 实例中的数据的摘要。为此，我们需要每种类型的摘要，我们将通过在该类型的实例上调用 summarize 方法来请求该摘要。通过在泛型类型 <code>T</code> 上定义 <code>Summary</code> trait，我们可以在任何我们想要能够总结的类型上实现 <code>summarize</code> 方法。</p>
<pre><code class="language-cairo noplayground">    pub trait Summary&lt;T&gt; {
        fn summarize(self: @T) -&gt; ByteArray;
    }
</code></pre>
<p>{{#label trait_signature}} <span class="caption"> 清单
{{#ref trait_signature}}: 一个 <code>Summary</code> trait，由泛型类型的 <code>summarize</code> 方法提供的行为组成</span></p>
<p>每个实现此 trait 的类型都必须为方法体提供自己的自定义行为。编译器将强制要求任何实现 <code>Summary</code> trait 的类型都由完全具有此签名的方法 <code>summarize</code> 定义。</p>
<p>一个 trait 可以在其主体中有多个方法：方法签名每行一个，每行以分号结尾。</p>
<h2 id="在类型上实现-trait"><a class="header" href="#在类型上实现-trait">在类型上实现 Trait</a></h2>
<p>现在我们已经定义了 <code>Summary</code> trait 方法所需的签名，我们可以在我们的媒体聚合器中的类型上实现它。以下代码展示了 <code>Summary</code> trait 在 <code>NewsArticle</code> 结构体上的实现，它使用标题、作者和位置来创建 <code>summarize</code> 的返回值。对于 <code>Tweet</code> 结构体，我们将 <code>summarize</code> 定义为用户名后跟推文的全部文本，假设推文内容已被限制为 280 个字符。</p>
<pre><code class="language-cairo noplayground">    #[derive(Drop)]
    pub struct NewsArticle {
        pub headline: ByteArray,
        pub location: ByteArray,
        pub author: ByteArray,
        pub content: ByteArray,
    }

    impl NewsArticleSummary of Summary&lt;NewsArticle&gt; {
        fn summarize(self: @NewsArticle) -&gt; ByteArray {
            format!("{} by {} ({})", self.headline, self.author, self.location)
        }
    }

    #[derive(Drop)]
    pub struct Tweet {
        pub username: ByteArray,
        pub content: ByteArray,
        pub reply: bool,
        pub retweet: bool,
    }

    impl TweetSummary of Summary&lt;Tweet&gt; {
        fn summarize(self: @Tweet) -&gt; ByteArray {
            format!("{}: {}", self.username, self.content)
        }
    }
</code></pre>
<p>{{#label trait_impl}} <span class="caption"> 清单 {{#ref trait_impl}}:
<code>Summary</code> trait 在 <code>NewsArticle</code> 和 <code>Tweet</code> 上的实现</span></p>
<p>在类型上实现 trait 类似于实现常规方法。区别在于，在 <code>impl</code> 之后，我们为实现放一个名称，然后使用 <code>of</code> 关键字，然后指定我们要为其编写实现的 trait 的名称。如果实现是针对泛型类型的，我们将泛型类型名称放在 trait 名称后的尖括号中。</p>
<p>注意，为了使 trait 方法可访问，必须有从调用方法的范围可见的该 trait 的实现。如果 trait 是 <code>pub</code> 而实现不是，并且实现从调用 trait 方法的范围不可见，这将导致编译错误。</p>
<p>在 <code>impl</code> 块中，我们放置 trait 定义已定义的方法签名。我们不使用分号结束每个签名，而是使用花括号，并在方法体中填写我们希望 trait 方法对特定类型具有的特定行为。</p>
<p>现在库已经在 <code>NewsArticle</code> 和 <code>Tweet</code> 上实现了 <code>Summary</code> trait，crate 的用户可以像调用常规方法一样在 <code>NewsArticle</code> 和 <code>Tweet</code> 的实例上调用 trait 方法。唯一的区别是用户必须将 trait 以及类型引入作用域。这是一个 crate 如何使用我们的 <code>aggregator</code> crate 的示例：</p>
<pre><code class="language-cairo">use aggregator::{NewsArticle, Summary, Tweet};

#[executable]
fn main() {
    let news = NewsArticle {
        headline: "Cairo has become the most popular language for developers",
        location: "Worldwide",
        author: "Cairo Digger",
        content: "Cairo is a new programming language for zero-knowledge proofs",
    };

    let tweet = Tweet {
        username: "EliBenSasson",
        content: "Crypto is full of short-term maximizing projects. \n @Starknet and @StarkWareLtd are about long-term vision maximization.",
        reply: false,
        retweet: false,
    }; // Tweet instantiation

    println!("New article available! {}", news.summarize());
    println!("New tweet! {}", tweet.summarize());
}
</code></pre>
<p>{{#label trait_main}}</p>
<p>这段代码打印以下内容：</p>
<pre><code class="language-shell">$ scarb execute 
   Compiling no_listing_15_traits v0.1.0 (listings/ch08-generic-types-and-traits/no_listing_15_traits/Scarb.toml)
    Finished `dev` profile target(s) in 1 second
   Executing no_listing_15_traits
New article available! Cairo has become the most popular language for developers by Cairo Digger (Worldwide)
New tweet! EliBenSasson: Crypto is full of short-term maximizing projects. 
 @Starknet and @StarkWareLtd are about long-term vision maximization.


</code></pre>
<p>依赖 <em>aggregator</em> crate 的其他 crate 也可以将 <code>Summary</code> trait 引入作用域，以在它们自己的类型上实现 <code>Summary</code>。</p>
<h2 id="默认实现"><a class="header" href="#默认实现">默认实现</a></h2>
<p>有时，为 trait 中的某些或所有方法提供默认行为，而不是要求在每种类型上实现所有方法，这很有用。然后，当我们在特定类型上实现 trait 时，我们可以保留或覆盖每个方法的默认行为。</p>
<p>在清单 {{#ref default_impl}} 中，我们要为 <code>Summary</code> trait 的 <code>summarize</code> 方法指定一个默认字符串，而不是仅定义方法签名，就像我们在清单 {{#ref trait_signature}} 中所做的那样。</p>
<p><span class="caption">文件名: src/lib.cairo</span></p>
<pre><code class="language-cairo">    pub trait Summary&lt;T&gt; {
        fn summarize(self: @T) -&gt; ByteArray {
            "(Read more...)"
        }
    }
</code></pre>
<p>{{#label default_impl}} <span class="caption"> 清单 {{#ref default_impl}}:
定义一个带有 <code>summarize</code> 方法默认实现的 <code>Summary</code> trait</span></p>
<p>要使用默认实现总结 <code>NewsArticle</code> 的实例，我们指定一个空的 <code>impl</code> 块 <code>impl NewsArticleSummary of Summary&lt;NewsArticle&gt; {}</code>。</p>
<p>即使我们不再直接在 <code>NewsArticle</code> 上定义 <code>summarize</code> 方法，我们已经提供了一个默认实现，并指定 <code>NewsArticle</code> 实现了 <code>Summary</code> trait。因此，我们仍然可以在 <code>NewsArticle</code> 的实例上调用 <code>summarize</code> 方法，如下所示：</p>
<pre><code class="language-cairo">use aggregator::{NewsArticle, Summary};

#[executable]
fn main() {
    let news = NewsArticle {
        headline: "Cairo has become the most popular language for developers",
        location: "Worldwide",
        author: "Cairo Digger",
        content: "Cairo is a new programming language for zero-knowledge proofs",
    };

    println!("New article available! {}", news.summarize());
}
</code></pre>
<p>这段代码打印 <code>New article available! (Read more...)</code>。</p>
<p>创建默认实现不需要我们更改关于 <code>Tweet</code> 上 <code>Summary</code> 的先前实现的任何内容。原因是覆盖默认实现的语法与实现没有默认实现的 trait 方法的语法相同。</p>
<p>默认实现可以调用同一 trait 中的其他方法，即使那些其他方法没有默认实现。通过这种方式，trait 可以提供许多有用的功能，并且只需要实现者指定其中的一小部分。例如，我们可以定义 <code>Summary</code> trait 有一个 <code>summarize_author</code> 方法，其实现是必需的，然后定义一个 <code>summarize</code> 方法，该方法具有调用 <code>summarize_author</code> 方法的默认实现：</p>
<pre><code class="language-cairo">    pub trait Summary&lt;T&gt; {
        fn summarize(
            self: @T,
        ) -&gt; ByteArray {
            format!("(Read more from {}...)", Self::summarize_author(self))
        }
        fn summarize_author(self: @T) -&gt; ByteArray;
    }
</code></pre>
<p>要使用这个版本的 <code>Summary</code>，我们在类型上实现该 trait 时只需要定义 <code>summarize_author</code>：</p>
<pre><code class="language-cairo">    impl TweetSummary of Summary&lt;Tweet&gt; {
        fn summarize_author(self: @Tweet) -&gt; ByteArray {
            format!("@{}", self.username)
        }
    }
</code></pre>
<p>在定义了 <code>summarize_author</code> 后，我们可以在 <code>Tweet</code> 结构体的实例上调用 <code>summarize</code>，<code>summarize</code> 的默认实现将调用我们提供的 <code>summarize_author</code> 定义。因为我们已经实现了 <code>summarize_author</code>，<code>Summary</code> trait 给了我们 <code>summarize</code> 方法的行为，而不需要我们编写更多代码。</p>
<pre><code class="language-cairo">use aggregator::{Summary, Tweet};

#[executable]
fn main() {
    let tweet = Tweet {
        username: "EliBenSasson",
        content: "Crypto is full of short-term maximizing projects. \n @Starknet and @StarkWareLtd are about long-term vision maximization.",
        reply: false,
        retweet: false,
    };

    println!("1 new tweet: {}", tweet.summarize());
}
</code></pre>
<p>这段代码打印 <code>1 new tweet: (Read more from @EliBenSasson...)</code>。</p>
<p>注意，无法从同一方法的覆盖实现中调用默认实现。</p>
<!-- TODO: NOT AVAILABLE IN CAIRO FOR NOW move traits as parameters here -->
<!-- ## Traits as parameters
 
 Now that you know how to define and implement traits, we can explore how to use
 traits to define functions that accept many different types. We'll use the
 `Summary` trait we implemented on the `NewsArticle` and `Tweet` types to define a `notify` function that calls the `summarize` method
 on its `item` parameter, which is of some type that implements the `Summary` trait. To do this, we use the `impl Trait` syntax.
 
 Instead of a concrete type for the `item` parameter, we specify the `impl`
 keyword and the trait name. This parameter accepts any type that implements the
 specified trait. In the body of `notify`, we can call any methods on `item`
 that come from the `Summary` trait, such as `summarize`. We can call `notify`
 and pass in any instance of `NewsArticle` or `Tweet`. Code that calls the
 function with any other type, such as a `String` or an `i32`, won’t compile
 because those types don’t implement `Summary`. -->
<!-- TODO NOT AVAILABLE IN CAIRO FOR NOW Using trait bounds to conditionally implement methods -->
<h2 id="管理和使用外部-trait"><a class="header" href="#管理和使用外部-trait">管理和使用外部 Trait</a></h2>
<p>要使用 trait 方法，你需要确保障导入了正确的 traits/实现。在某些情况下，如果 trait 和实现是在单独的模块中声明的，你可能不仅需要导入 trait，还需要导入实现。如果 <code>CircleGeometry</code> 实现位于名为 <em>circle</em> 的单独模块/文件中，那么为了在 <code>Circle</code> 结构体上定义 <code>boundary</code> 方法，我们需要在 <em>circle</em> 模块中导入 <code>ShapeGeometry</code> trait。</p>
<p>如果代码像清单 {{#ref external_trait}} 那样组织成模块，其中 trait 的实现定义在与 trait 本身不同的模块中，则需要显式导入相关的 trait 或实现。</p>
<pre><code class="language-cairo noplayground">// Here T is an alias type which will be provided during implementation
pub trait ShapeGeometry&lt;T&gt; {
    fn boundary(self: T) -&gt; u64;
    fn area(self: T) -&gt; u64;
}

mod rectangle {
    // Importing ShapeGeometry is required to implement this trait for Rectangle
    use super::ShapeGeometry;

    #[derive(Copy, Drop)]
    pub struct Rectangle {
        pub height: u64,
        pub width: u64,
    }

    // Implementation RectangleGeometry passes in &lt;Rectangle&gt;
    // to implement the trait for that type
    impl RectangleGeometry of ShapeGeometry&lt;Rectangle&gt; {
        fn boundary(self: Rectangle) -&gt; u64 {
            2 * (self.height + self.width)
        }
        fn area(self: Rectangle) -&gt; u64 {
            self.height * self.width
        }
    }
}

mod circle {
    // Importing ShapeGeometry is required to implement this trait for Circle
    use super::ShapeGeometry;

    #[derive(Copy, Drop)]
    pub struct Circle {
        pub radius: u64,
    }

    // Implementation CircleGeometry passes in &lt;Circle&gt;
    // to implement the imported trait for that type
    impl CircleGeometry of ShapeGeometry&lt;Circle&gt; {
        fn boundary(self: Circle) -&gt; u64 {
            (2 * 314 * self.radius) / 100
        }
        fn area(self: Circle) -&gt; u64 {
            (314 * self.radius * self.radius) / 100
        }
    }
}
use circle::Circle;
use rectangle::Rectangle;

#[executable]
fn main() {
    let rect = Rectangle { height: 5, width: 7 };
    println!("Rectangle area: {}", ShapeGeometry::area(rect)); //35
    println!("Rectangle boundary: {}", ShapeGeometry::boundary(rect)); //24

    let circ = Circle { radius: 5 };
    println!("Circle area: {}", ShapeGeometry::area(circ)); //78
    println!("Circle boundary: {}", ShapeGeometry::boundary(circ)); //31
}
</code></pre>
<p>{{#label external_trait}} <span class="caption"> 清单
{{#ref external_trait}}: 实现外部 trait</span></p>
<p>注意，在清单 {{#ref external_trait}} 中，<code>CircleGeometry</code> 和 <code>RectangleGeometry</code> 实现不需要声明为 <code>pub</code>。事实上，公有的 <code>ShapeGeometry</code> trait 用于在 <code>main</code> 函数中打印结果。无论实现的可见性如何，编译器都会为 <code>ShapeGeometry</code> 公有 trait 找到合适的实现。</p>
<h2 id="impl-别名"><a class="header" href="#impl-别名">Impl 别名</a></h2>
<p>实现在导入时可以使用别名。当你想用具体类型实例化泛型实现时，这最有用。例如，假设我们定义了一个用于为类型 <code>T</code> 返回值 <code>2</code> 的 trait <code>Two</code>。我们可以通过简单地加上两倍的 <code>one</code> 值并返回它，为所有实现 <code>One</code> trait 的类型编写 <code>Two</code> 的微不足道的泛型实现。然而，在我们的公共 API 中，我们可能只想暴露 <code>u8</code> 和 <code>u128</code> 类型的 <code>Two</code> 实现。</p>
<pre><code class="language-cairo noplayground">trait Two&lt;T&gt; {
    fn two() -&gt; T;
}

mod one_based {
    pub impl TwoImpl&lt;
        T, +Copy&lt;T&gt;, +Drop&lt;T&gt;, +Add&lt;T&gt;, impl One: core::num::traits::One&lt;T&gt;,
    &gt; of super::Two&lt;T&gt; {
        fn two() -&gt; T {
            One::one() + One::one()
        }
    }
}

pub impl U8Two = one_based::TwoImpl&lt;u8&gt;;
pub impl U128Two = one_based::TwoImpl&lt;u128&gt;;
</code></pre>
<p>{{#label impl-aliases}} <span class="caption"> 清单 {{#ref impl-aliases}}:
使用 impl 别名用具体类型实例化泛型 impl</span></p>
<p>我们可以在私有模块中定义泛型实现，使用 impl 别名为这两个具体类型实例化泛型实现，并使这两个实现公有，同时保持泛型实现私有且不暴露。这样，我们可以避免使用泛型实现的代码重复，同时保持公共 API 的干净和简单。</p>
<h2 id="负实现-negative-impls"><a class="header" href="#负实现-negative-impls">负实现 (Negative Impls)</a></h2>
<blockquote>
<p>注意：这仍然是一个实验性功能，只有在你的 <em>Scarb.toml</em> 文件的 <code>[package]</code> 部分下启用 <code>experimental-features = ["negative_impls"]</code> 才能使用。</p>
</blockquote>
<p>负实现，也称为负 traits 或负约束，是一种允许你在定义泛型类型的 trait 实现时表达类型 <em>不</em> 实现某个 trait 的机制。负 impl 使你能够编写仅在当前范围内不存在另一个实现时才适用的实现。</p>
<p>例如，假设我们有一个 trait <code>Producer</code> 和一个 trait <code>Consumer</code>，我们想定义一个泛型行为，其中所有类型默认实现 <code>Consumer</code> trait。然而，我们要确保没有类型既可以作为 <code>Consumer</code> 又可以作为 <code>Producer</code>。我们可以使用负 impl 来表达此限制。</p>
<p>在清单 {{#ref negative-impls}} 中，我们定义了一个实现 <code>Producer</code> trait 的 <code>ProducerType</code>，以及另外两个不实现 <code>Producer</code> trait 的类型 <code>AnotherType</code> 和 <code>AThirdType</code>。然后我们使用负 impl 为所有不实现 <code>Producer</code> trait 的类型创建 <code>Consumer</code> trait 的默认实现。</p>
<pre><code class="language-cairo">#[derive(Drop)]
struct ProducerType {}

#[derive(Drop, Debug)]
struct AnotherType {}

#[derive(Drop, Debug)]
struct AThirdType {}

trait Producer&lt;T&gt; {
    fn produce(self: T) -&gt; u32;
}

trait Consumer&lt;T&gt; {
    fn consume(self: T, input: u32);
}

impl ProducerImpl of Producer&lt;ProducerType&gt; {
    fn produce(self: ProducerType) -&gt; u32 {
        42
    }
}

impl TConsumerImpl&lt;T, +core::fmt::Debug&lt;T&gt;, +Drop&lt;T&gt;, -Producer&lt;T&gt;&gt; of Consumer&lt;T&gt; {
    fn consume(self: T, input: u32) {
        println!("{:?} consumed value: {}", self, input);
    }
}

#[executable]
fn main() {
    let producer = ProducerType {};
    let another_type = AnotherType {};
    let third_type = AThirdType {};
    let production = producer.produce();

    // producer.consume(production); Invalid: ProducerType does not implement Consumer
    another_type.consume(production);
    third_type.consume(production);
}
</code></pre>
<p>{{#label negative-impls}} <span class="caption"> 清单
{{#ref negative-impls}}: 使用负 impl 强制类型不能同时实现 <code>Producer</code> 和 <code>Consumer</code> traits</span></p>
<p>在 <code>main</code> 函数中，我们创建 <code>ProducerType</code>、<code>AnotherType</code> 和 <code>AThirdType</code> 的实例。然后我们在 <code>producer</code> 实例上调用 <code>produce</code> 方法，并将结果传递给 <code>another_type</code> 和 <code>third_type</code> 实例上的 <code>consume</code> 方法。最后，我们尝试在 <code>producer</code> 实例上调用 <code>consume</code> 方法，这会导致编译时错误，因为 <code>ProducerType</code> 没有实现 <code>Consumer</code> trait。</p>
<h2 id="关联项上的约束-traits"><a class="header" href="#关联项上的约束-traits">关联项上的约束 traits</a></h2>
<blockquote>
<p>目前，关联项被认为是一项实验性功能。为了使用它们，你需要在你的 <code>Scarb.toml</code> 的 <code>[package]</code> 部分下添加以下内容：
<code>experimental-features = ["associated_item_constraints"]</code>。</p>
</blockquote>
<p>在某些情况下，你可能希望根据泛型参数的类约束 trait 的 <a href="./ch12-10-associated-items.html">关联项</a>。你可以在 trait 约束后使用 <code>[AssociatedItem: ConstrainedValue]</code> 语法来做到这一点。</p>
<p>假设你想为集合实现一个 <code>extend</code> 方法。此方法接受一个迭代器并将其元素添加到集合中。为了确保类型安全，我们要让迭代器的元素与集合的元素类型匹配。我们可以通过约束 <code>Iterator::Item</code> 关联类型与集合的类型匹配来实现这一点。</p>
<p>在清单 {{#ref associated-items-constraints}} 中，我们通过定义一个 trait <code>Extend&lt;T, A&gt;</code> 并在 <code>extend</code> 函数的 trait 约束上使用 <code>[Item: A]</code> 作为约束来实现这一点。此外，我们使用 <code>Destruct</code> trait 确保迭代器被消耗，并展示了 <code>Extend&lt;Array&lt;T&gt;, T&gt;</code> 的示例实现。</p>
<pre><code class="language-cairo">trait Extend&lt;T, A&gt; {
    fn extend&lt;I, +core::iter::Iterator&lt;I&gt;[Item: A], +Destruct&lt;I&gt;&gt;(ref self: T, iterator: I);
}

impl ArrayExtend&lt;T, +Drop&lt;T&gt;&gt; of Extend&lt;Array&lt;T&gt;, T&gt; {
    fn extend&lt;I, +core::iter::Iterator&lt;I&gt;[Item: T], +Destruct&lt;I&gt;&gt;(ref self: Array&lt;T&gt;, iterator: I) {
        for item in iterator {
            self.append(item);
        }
    }
}
</code></pre>
<p>{{#label associated-items-constraints}} <span class="caption"> 清单
{{#ref associated-items-constraints}}: 使用关联项约束确保类型与另一种类型的关联类型匹配</span></p>
<h2 id="用于类型相等约束的-typeequal-trait"><a class="header" href="#用于类型相等约束的-typeequal-trait">用于类型相等约束的 <code>TypeEqual</code> Trait</a></h2>
<p>来自 <code>core::metaprogramming</code> 模块的 <code>TypeEqual</code> trait 让你能够基于类型相等创建约束。在大多数情况下，你不需要 <code>+TypeEqual</code>，你可以仅使用泛型参数和关联类型约束来实现相同的目的，但 <code>TypeEqual</code> 在某些高级场景中可能很有用。</p>
<p>第一个用例是为匹配特定条件的所有类型实现一个 trait，但排除特定类型。我们通过在 <code>TypeEqual</code> trait 上使用负实现来做到这一点。</p>
<p>在清单 {{#ref type-equal-negative-constraints}} 中，我们创建一个 <code>SafeDefault</code> trait 并为实现 <code>Default</code> 的任何类型 <code>T</code> 实现它。但是，我们使用 <code>-TypeEqual&lt;T, SensitiveData&gt;</code> 排除 <code>SensitiveData</code> 类型。</p>
<pre><code class="language-cairo">trait SafeDefault&lt;T&gt; {
    fn safe_default() -&gt; T;
}

#[derive(Drop, Default)]
struct SensitiveData {
    secret: felt252,
}

// Implement SafeDefault for all types EXCEPT SensitiveData
impl SafeDefaultImpl&lt;
    T, +Default&lt;T&gt;, -core::metaprogramming::TypeEqual&lt;T, SensitiveData&gt;,
&gt; of SafeDefault&lt;T&gt; {
    fn safe_default() -&gt; T {
        Default::default()
    }
}

#[executable]
fn main() {
    let _safe: u8 = SafeDefault::safe_default();
    let _unsafe: SensitiveData = Default::default(); // Allowed
    // This would cause a compile error:
// let _dangerous: SensitiveData = SafeDefault::safe_default();
}
</code></pre>
<p>{{#label type-equal-negative-constraints}} <span class="caption"> 清单
{{#ref type-equal-negative-constraints}}: 使用 <code>TypeEqual</code> trait 从实现中排除特定类型</span></p>
<p>第二个用例是确保两种类型相等，在处理 <a href="./ch12-10-associated-items.html#associated-types">关联类型</a> 时特别有用。</p>
<p>在清单 {{#ref type-equal-constraints}} 中，我们用一个具有关联类型 <code>State</code> 的 <code>StateMachine</code> trait 来展示这一点。我们创建两个类型，<code>TA</code> 和 <code>TB</code>，都使用 <code>StateCounter</code> 作为它们的 <code>State</code>。然后我们实现一个 <code>combine</code> 函数，该函数仅在两个状态机具有相同的状态类型时才工作，使用约束 <code>TypeEqual&lt;A::State, B::State&gt;</code>。</p>
<pre><code class="language-cairo">trait StateMachine {
    type State;
    fn transition(ref state: Self::State);
}

#[derive(Copy, Drop)]
struct StateCounter {
    counter: u8,
}

impl TA of StateMachine {
    type State = StateCounter;
    fn transition(ref state: StateCounter) {
        state.counter += 1;
    }
}

impl TB of StateMachine {
    type State = StateCounter;
    fn transition(ref state: StateCounter) {
        state.counter *= 2;
    }
}

fn combine&lt;
    impl A: StateMachine,
    impl B: StateMachine,
    +core::metaprogramming::TypeEqual&lt;A::State, B::State&gt;,
&gt;(
    ref self: A::State,
) {
    A::transition(ref self);
    B::transition(ref self);
}

#[executable]
fn main() {
    let mut initial = StateCounter { counter: 0 };
    combine::&lt;TA, TB&gt;(ref initial);
}
</code></pre>
<p>{{#label type-equal-constraints}} <span class="caption"> 清单
{{#ref type-equal-constraints}}: 使用 <code>TypeEqual</code> trait 确保两种类型具有匹配的关联类型</span></p>
<p>{{#quiz ../quizzes/ch08-02-traits.toml}}</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch08-01-generic-data-types.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                            </a>

                            <a rel="next prefetch" href="ch09-00-error-handling.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch08-01-generic-data-types.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"/></svg></span>
                    </a>

                    <a rel="next prefetch" href="ch09-00-error-handling.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"/></svg></span>
                    </a>
            </nav>

        </div>

        <template id=fa-eye><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM432 256c0 79.5-64.5 144-144 144s-144-64.5-144-144s64.5-144 144-144s144 64.5 144 144zM288 192c0 35.3-28.7 64-64 64c-11.5 0-22.3-3-31.6-8.4c-.2 2.8-.4 5.5-.4 8.4c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6z"/></svg></span></template>
        <template id=fa-eye-slash><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c5.2-11.8 8-24.8 8-38.5c0-53-43-96-96-96c-2.8 0-5.6 .1-8.4 .4c5.3 9.3 8.4 20.1 8.4 31.6c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zm223.1 298L373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5z"/></svg></span></template>
        <template id=fa-copy><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M502.6 70.63l-61.25-61.25C435.4 3.371 427.2 0 418.7 0H255.1c-35.35 0-64 28.66-64 64l.0195 256C192 355.4 220.7 384 256 384h192c35.2 0 64-28.8 64-64V93.25C512 84.77 508.6 76.63 502.6 70.63zM464 320c0 8.836-7.164 16-16 16H255.1c-8.838 0-16-7.164-16-16L239.1 64.13c0-8.836 7.164-16 16-16h128L384 96c0 17.67 14.33 32 32 32h47.1V320zM272 448c0 8.836-7.164 16-16 16H63.1c-8.838 0-16-7.164-16-16L47.98 192.1c0-8.836 7.164-16 16-16H160V128H63.99c-35.35 0-64 28.65-64 64l.0098 256C.002 483.3 28.66 512 64 512h192c35.2 0 64-28.8 64-64v-32h-47.1L272 448z"/></svg></span></template>
        <template id=fa-play><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg></span></template>
        <template id=fa-clock-rotate-left><span class=fa-svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc. --><path d="M75 75L41 41C25.9 25.9 0 36.6 0 57.9V168c0 13.3 10.7 24 24 24H134.1c21.4 0 32.1-25.9 17-41l-30.8-30.8C155 85.5 203 64 256 64c106 0 192 86 192 192s-86 192-192 192c-40.8 0-78.6-12.7-109.7-34.4c-14.5-10.1-34.4-6.6-44.6 7.9s-6.6 34.4 7.9 44.6C151.2 495 201.7 512 256 512c141.4 0 256-114.6 256-256S397.4 0 256 0C185.3 0 121.3 28.7 75 75zm181 53c-13.3 0-24 10.7-24 24V256c0 6.4 2.5 12.5 7 17l72 72c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-65-65V152c0-13.3-10.7-24-24-24z"/></svg></span></template>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr-ef4e11c1.min.js"></script>
        <script src="mark-09e88c2c.min.js"></script>
        <script src="searcher-c2a407aa.js"></script>

        <script src="clipboard-1626706a.min.js"></script>
        <script src="highlight-abc7f01d.js"></script>
        <script src="book-a0b12cfe.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
